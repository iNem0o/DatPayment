<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="stylesheets/DatPayment.css">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>DatPayment</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>DatPayment</h1>
          <h2>is a Javascript library helping you managin an awesome payment form</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/iNem0o/DatPayment/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/iNem0o/DatPayment/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/iNem0o/DatPayment" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <form action="/" method="POST" id="payment-form" class="datpayment-form">
            <div class="dpf-title">
              Paiement par carte bancaire
              <div class="accepted-cards-logo"></div>
            </div>
            <div class="dpf-card-placeholder"></div>
            <div class="dpf-input-container">
              <div class="dpf-input-row">
                <label class="dpf-input-label">Numéro de carte</label>
                <div class="dpf-input-container with-icon">
                  <span class="dpf-input-icon"><i class="fa fa-credit-card" aria-hidden="true"></i></span>
                  <input type="text" class="dpf-input" size="20" data-type="number">
                </div>
              </div>

              <div class="dpf-input-row">
                <div class="dpf-input-column">
                  <input type="hidden" size="2" data-type="exp_month" placeholder="MM">
                  <input type="hidden" size="2" data-type="exp_year" placeholder="YY">

                  <label class="dpf-input-label">Date d'expiration</label>
                  <div class="dpf-input-container">
                    <input type="text" class="dpf-input" data-type="expiry">
                  </div>
                </div>
                <div class="dpf-input-column">
                  <label class="dpf-input-label">Code de vérification</label>
                  <div class="dpf-input-container">
                    <input type="text" class="dpf-input" size="4" data-type="cvc">
                  </div>
                </div>
              </div>

              <div class="dpf-input-row">
                <label class="dpf-input-label">Nom du porteur</label>
                <div class="dpf-input-container">
                  <input type="text" size="4" class="dpf-input" data-type="name">
                </div>
              </div>

              <button type="submit" class="dpf-submit">
                        <span class="btn-active-state">
                            Payer maintenant
                        </span>
                        <span class="btn-loading-state">
                            <i class="fa fa-refresh "></i>
                        </span>
              </button>
            </div>
          </form>

          <br><br><br><br>
        <pre>
            NUMBER              BRAND
            _____________________________________

            4242424242424242	Visa
            5555555555554444	Mastercard
            378282246310005     American Express
            6011111111111117	Discover
        </pre>
        <pre id="demo-log"></pre>

        </section>

        <footer>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>


        <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
        <script type="text/javascript" src="/javascripts/DatPayment.js"></script>

        <script type="text/javascript">
          var payment_form = new DatPayment({
            form_selector: '#payment-form',
            card_container_selector: '.dpf-card-placeholder',

            number_selector: '.dpf-input[data-type="number"]',
            date_selector: '.dpf-input[data-type="expiry"]',
            cvc_selector: '.dpf-input[data-type="cvc"]',
            name_selector: '.dpf-input[data-type="name"]',

            submit_button_selector: '.dpf-submit',

            placeholders: {
              number: '•••• •••• •••• ••••',
              expiry: '••/••',
              cvc: '•••',
              name: 'DUPONT'
            },

            validators: {
              number: function(number){
                return Stripe.card.validateCardNumber(number);
              },
              expiry: function(expiry){
                var expiry = expiry.split(' / ');
                return Stripe.card.validateExpiry(expiry[0]||0,expiry[1]||0);
              },
              cvc: function(cvc){
                return Stripe.card.validateCVC(cvc);
              },
              name: function(value){
                return value.length > 0;
              }
            }
          });

          var demo_log_div = document.getElementById("demo-log");

          payment_form.form.addEventListener('payment_form:submit',function(e){
            var form_data = e.detail;
            payment_form.unlockForm();
            demo_log_div.innerHTML += "<br>"+JSON.stringify(form_data);
          });

          payment_form.form.addEventListener('payment_form:field_validation_success',function(e){
            var input = e.detail;

            demo_log_div.innerHTML += "<br>field_validation_success:"+input.getAttribute("data-type");

          });

          payment_form.form.addEventListener('payment_form:field_validation_failed',function(e){
            var input = e.detail;

            demo_log_div.innerHTML += "<br>field_validation_failed:"+input.getAttribute("data-type");
          });
        </script>
      </div>
    </div>
  </body>
</html>
